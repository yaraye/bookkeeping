import { Injectable, NgModule, Directive, EventEmitter, Input, NgZone, Output, HostListener, Renderer2, ComponentFactoryResolver, ViewContainerRef, Component, defineInjectable } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class DatePickerDirectiveService {
    constructor() { }
}
DatePickerDirectiveService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] },
];
/** @nocollapse */
DatePickerDirectiveService.ctorParameters = () => [];
/** @nocollapse */ DatePickerDirectiveService.ngInjectableDef = defineInjectable({ factory: function DatePickerDirectiveService_Factory() { return new DatePickerDirectiveService(); }, token: DatePickerDirectiveService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class DatePickerDirectiveComponent {
    constructor() {
        this._mindate = null;
        this._maxdate = null;
        this.singleDatePicker = false;
        // _singleDatePicker: boolean = false;
        // @Input()
        // set singleDatePicker(isSingle) {
        //   if (isSingle) {
        //     this._singleDatePicker = isSingle;
        //   }
        // }
        // get singleDatePicker() {
        //   return this._singleDatePicker;
        // }
        this.linkedCalendars = true;
        this.monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        this.tmpDate = null;
        this.tmpEndDate = null;
        this.days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
        this.focusedInput = 'start';
        this.close = new EventEmitter();
        this.dateSelected = new EventEmitter();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    set minDate(date) {
        if (date) {
            this._mindate = new Date(date);
        }
    }
    /**
     * @return {?}
     */
    get minDate() {
        return this._mindate;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    set maxDate(date) {
        if (date) {
            this._maxdate = new Date(date);
        }
    }
    /**
     * @return {?}
     */
    get maxDate() {
        return this._maxdate;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    set startDate(date) {
        if (date) {
            this._startDate = new Date(date);
        }
    }
    /**
     * @return {?}
     */
    get startDate() {
        return this._startDate;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    set endDate(date) {
        if (date) {
            this._endDate = new Date(date);
        }
    }
    /**
     * @return {?}
     */
    get endDate() {
        return this._endDate;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.ranges = [{
                title: 'Today',
                period: [new Date(), new Date()]
            }, {
                title: 'Yesterday',
                period: [this.getYesterday(), this.getYesterday()]
            }, {
                title: 'Last 7 Days',
                period: [this.getPast7Days(), new Date()]
            }, {
                title: 'Last 30 Days',
                period: [this.getPast30Days(), new Date()]
            }, {
                title: 'This Month',
                period: [this.getFirstDay(), new Date()]
            }, {
                title: 'Last Month',
                period: [this.getFirstDayPrev(), this.getLastDayPrev()]
            }];
        if (!this.startDate) {
            this._startDate = new Date();
        }
        this.leftCalendar = { month: new Date(this.startDate.getTime()), calendar: null };
        if (!this.endDate) {
            this._endDate = new Date(this.startDate);
        }
        this.rightCalendar = { month: this.getNextMonth(this.endDate), calendar: null };
        this.displayStartDate = this.startDate.toLocaleDateString();
        this.displayEndDate = this.endDate.toLocaleDateString();
        this.renderCalendar('left');
        this.renderCalendar('right');
    }
    /**
     * @return {?}
     */
    getYesterday() {
        let /** @type {?} */ date = new Date();
        date.setDate(date.getDate() - 1);
        return date;
    }
    /**
     * @return {?}
     */
    getPast7Days() {
        let /** @type {?} */ date = new Date();
        date.setDate(date.getDate() - 6);
        return date;
    }
    /**
     * @return {?}
     */
    getPast30Days() {
        let /** @type {?} */ date = new Date();
        date.setDate(date.getDate() - 29);
        return date;
    }
    /**
     * @return {?}
     */
    getFirstDay() {
        let /** @type {?} */ date = new Date();
        return new Date(date.getFullYear(), date.getMonth(), 1);
    }
    /**
     * @return {?}
     */
    getFirstDayPrev() {
        let /** @type {?} */ date = new Date();
        return new Date(date.getFullYear(), (date.getMonth() - 1), 1);
    }
    /**
     * @return {?}
     */
    getLastDayPrev() {
        let /** @type {?} */ date = new Date();
        return new Date(date.getFullYear(), date.getMonth(), 0);
    }
    /**
     * @param {?} month
     * @param {?} year
     * @return {?}
     */
    daysInMonth(month, year) {
        return new Date(year, month, 0).getDate();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getLastMonth(date) {
        let /** @type {?} */ d = new Date(date.getTime());
        let /** @type {?} */ c = new Date(d.getTime());
        c.setMonth((d.getMonth() - 1));
        return c;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getNextMonth(date) {
        let /** @type {?} */ d = new Date(date.getTime());
        return new Date(d.setMonth(d.getMonth() + 1));
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getMonthYear(date) {
        return date.getFullYear() + "-" + date.getMonth();
    }
    /**
     * @param {?} d1
     * @param {?} d2
     * @return {?}
     */
    isBefore(d1, d2) {
        return d1 < d2;
    }
    /**
     * @param {?} d1
     * @param {?} d2
     * @return {?}
     */
    isAfter(d1, d2) {
        return d2 < d1;
    }
    /**
     * @param {?} side
     * @return {?}
     */
    renderCalendar(side) {
        let /** @type {?} */ date = (side == 'left' ? this.leftCalendar.month : this.rightCalendar.month);
        let /** @type {?} */ month = date.getMonth();
        let /** @type {?} */ year = date.getFullYear();
        let /** @type {?} */ daysInMonth = this.daysInMonth(month + 1, year);
        let /** @type {?} */ firstDay = new Date(year, month, 1);
        let /** @type {?} */ lastMonth = this.getLastMonth(firstDay).getMonth();
        let /** @type {?} */ lastYear = this.getLastMonth(firstDay).getFullYear();
        let /** @type {?} */ daysInLastMonth = this.daysInMonth(lastMonth + 1, lastYear);
        let /** @type {?} */ dayOfWeek = firstDay.getDay();
        let /** @type {?} */ calendar = [];
        for (let /** @type {?} */ i = 0; i < 6; i++) {
            calendar[i] = [];
        }
        let /** @type {?} */ startDay = daysInLastMonth - dayOfWeek + 1;
        if (startDay > daysInLastMonth) {
            startDay -= 7;
        }
        if (dayOfWeek === 0) {
            startDay = daysInLastMonth - 6;
        }
        let /** @type {?} */ curDate = new Date(lastYear, lastMonth, startDay);
        for (let /** @type {?} */ i = 0, /** @type {?} */ col = 0, /** @type {?} */ row = 0; i < 42; i++, col++, curDate.setDate(curDate.getDate() + 1)) {
            if (i > 0 && col % 7 === 0) {
                col = 0;
                row++;
            }
            calendar[row][col] = new Date(curDate.getTime());
            curDate.setHours(12);
            if (this.minDate && calendar[row][col].toLocaleDateString() == this.minDate.toLocaleDateString() && this.isBefore(calendar[row][col], this.minDate) && side == 'left') {
                calendar[row][col] = new Date(this.minDate.getTime());
            }
            if (this.maxDate && calendar[row][col].toLocaleDateString() == this.maxDate.toLocaleDateString() && this.isAfter(calendar[row][col], this.maxDate) && side == 'right') {
                calendar[row][col] = new Date(this.maxDate.getTime());
            }
        }
        //make the calendar object available to hoverDate/clickDate
        if (side == 'left') {
            this.leftCalendar.calendar = calendar;
        }
        else {
            this.rightCalendar.calendar = calendar;
        }
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isToday(day) {
        if (!day) {
            return false;
        }
        return new Date().toLocaleDateString() === day.toLocaleDateString();
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isActiveDate(day) {
        if (day.toLocaleDateString() == this.startDate.toLocaleDateString()) {
            return true;
        }
        else if (this.endDate && day.toLocaleDateString() == this.endDate.toLocaleDateString()) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isStartDate(day) {
        if (day.toLocaleDateString() == this.startDate.toLocaleDateString()) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isEndDate(day) {
        if (this.endDate && day.toLocaleDateString() == this.endDate.toLocaleDateString()) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isDisabled(day) {
        if (this.minDate && this.isBefore(day, this.minDate)) {
            return true;
        }
        else if (this.maxDate && this.isAfter(day, this.maxDate)) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} day
     * @return {?}
     */
    isInRange(day) {
        if (this.endDate) {
            if (this.isAfter(day, this.startDate) && this.isBefore(day, this.endDate)) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            if (this.isAfter(day, this.startDate) && this.isBefore(day, this.tmpDate)) {
                return true;
            }
            else {
                return false;
            }
        }
    }
    /**
     * @return {?}
     */
    nextAvailable() {
        let /** @type {?} */ calendar = (this.singleDatePicker ? this.leftCalendar : this.rightCalendar);
        let /** @type {?} */ lday = new Date(calendar.month.getFullYear(), calendar.month.getMonth() + 1, 0);
        if (!this.maxDate || this.isAfter(this.maxDate, lday)) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    prevAvailable() {
        let /** @type {?} */ calendar = this.leftCalendar;
        let /** @type {?} */ fday = new Date(calendar.month.getFullYear(), calendar.month.getMonth(), 1);
        if (!this.minDate || this.isBefore(this.minDate, fday)) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * @param {?} day
     * @param {?} side
     * @return {?}
     */
    notActiveMonth(day, side) {
        let /** @type {?} */ cal = (side == 'left' ? this.leftCalendar.calendar : this.rightCalendar.calendar);
        if (day.getMonth() != cal[1][1].getMonth()) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} side
     * @return {?}
     */
    getMonth(side) {
        let /** @type {?} */ cal = (side == 'left' ? this.leftCalendar.calendar : this.rightCalendar.calendar);
        return this.monthNames[cal[1][1].getMonth()] + " " + cal[1][1].getFullYear();
    }
    /**
     * @return {?}
     */
    clickPrev() {
        this.leftCalendar.month.setMonth(this.leftCalendar.month.getMonth() - 1);
        this.renderCalendar('left');
        if (this.rightCalendar.calendar) {
            this.rightCalendar.month.setMonth(this.rightCalendar.month.getMonth() - 1);
            this.renderCalendar('right');
        }
    }
    /**
     * @return {?}
     */
    clickNext() {
        this.leftCalendar.month.setMonth(this.leftCalendar.month.getMonth() + 1);
        this.renderCalendar('left');
        if (this.rightCalendar.calendar) {
            this.rightCalendar.month.setMonth(this.rightCalendar.month.getMonth() + 1);
            this.renderCalendar('right');
        }
    }
    /**
     * @param {?} day
     * @param {?} side
     * @return {?}
     */
    clickdate(day, side) {
        if (this.isDisabled(day)) {
            return false;
        }
        if (this.endDate || this.isBefore(day, this.startDate)) {
            this._endDate = null;
            this.setStartDate(day);
            if (this.tmpEndDate) {
                this.setEndDate(this.tmpEndDate);
            }
            else {
                this.focusedInput = 'end';
            }
        }
        else if (!this.endDate && this.isBefore(day, this.startDate)) {
            this.setEndDate(this.startDate);
            this.focusedInput = 'start';
        }
        else {
            this.setEndDate(day);
            this.focusedInput = 'start';
        }
        if (this.singleDatePicker) {
            this.setEndDate(this.startDate);
            this.focusedInput = 'start';
            this.dateSelected.emit(this.startDate.toLocaleDateString());
        }
        this.updateView();
    }
    /**
     * @param {?} range
     * @return {?}
     */
    rangeClick(range) {
        this.setStartDate(range.period[0]);
        this.setEndDate(range.period[1]);
        this.updateView();
        this.applyClick();
    }
    /**
     * @param {?} range
     * @return {?}
     */
    rangeHover(range) {
        this.displayStartDate = range.period[0].toLocaleDateString();
        this.displayEndDate = range.period[1].toLocaleDateString();
    }
    /**
     * @return {?}
     */
    hoverExit() {
        this.displayStartDate = this.startDate.toLocaleDateString();
        this.displayEndDate = (this.endDate ? this.endDate.toLocaleDateString() : this.displayStartDate);
    }
    /**
     * @param {?} day
     * @return {?}
     */
    hoverdate(day) {
        if (this.isDisabled(day)) {
            return false;
        }
        this.tmpDate = new Date(day.getTime());
        if (this.focusedInput === 'start') {
            this.displayStartDate = this.tmpDate.toLocaleDateString();
        }
        else {
            this.displayEndDate = this.tmpDate.toLocaleDateString();
        }
    }
    /**
     * @param {?} side
     * @return {?}
     */
    inputFocus(side) {
        this.focusedInput = side;
        if (this.endDate) {
            this.tmpEndDate = new Date(this.endDate.getTime());
            if (side == 'start') ;
            else if (side == 'end') {
                this._endDate = null;
            }
        }
    }
    /**
     * @param {?} side
     * @return {?}
     */
    inputBlur(side) {
    }
    /**
     * @param {?} event
     * @param {?} side
     * @return {?}
     */
    inputChanged(event, side) {
        let /** @type {?} */ val = new Date(event.target.value).toLocaleDateString();
        if (this.isDisabled(val)) {
            return false;
        }
        if (side === 'start') {
            this.setStartDate(val);
        }
        else if (side === 'end') {
            this.setEndDate(val);
            if (this.isBefore(val, this.startDate)) {
                this.setStartDate(val);
            }
        }
        this.updateView();
    }
    /**
     * @return {?}
     */
    updateView() {
        if (this.endDate) {
            //if both dates are visible already, do nothing
            if (!this.singleDatePicker && this.leftCalendar.month && this.rightCalendar.month &&
                (this.getMonthYear(this.startDate) == this.getMonthYear(this.leftCalendar.month)) || (this.getMonthYear(this.startDate) == this.getMonthYear(this.rightCalendar.month))
                &&
                    (this.getMonthYear(this.endDate) == this.getMonthYear(this.leftCalendar.month) || this.getMonthYear(this.endDate) == this.getMonthYear(this.rightCalendar.month))) {
                return;
            }
            this.leftCalendar.month = new Date(this.startDate.getTime());
            if (!this.linkedCalendars && (this.endDate.getMonth() != this.startDate.getMonth() || this.endDate.getFullYear() != this.startDate.getFullYear())) {
                this.rightCalendar.month = new Date(this.endDate.getTime());
            }
            else {
                this.rightCalendar.month = new Date(this.startDate.getFullYear(), this.startDate.getMonth() + 1, 1);
            }
        }
        else {
            if (this.getMonthYear(this.leftCalendar.month) != this.getMonthYear(this.startDate) && this.getMonthYear(this.rightCalendar.month) != this.getMonthYear(this.startDate)) {
                this.leftCalendar.month = new Date(this.startDate.getTime());
                this.rightCalendar.month = new Date(this.startDate.getFullYear(), this.startDate.getMonth() + 1, 1);
            }
        }
        if (this.maxDate && this.linkedCalendars && !this.singleDatePicker && this.rightCalendar.month > this.maxDate) {
            this.rightCalendar.month = new Date(this.maxDate.getTime());
            this.leftCalendar.month = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth() - 1, 1);
        }
        this.renderCalendar('left');
        this.renderCalendar('right');
    }
    /**
     * @param {?} startDate
     * @return {?}
     */
    setStartDate(startDate) {
        if (typeof startDate === 'string')
            this._startDate = new Date(startDate);
        if (typeof startDate === 'object')
            this._startDate = new Date(startDate.getTime());
        this.displayStartDate = this.startDate.toLocaleDateString();
    }
    /**
     * @param {?} endDate
     * @return {?}
     */
    setEndDate(endDate) {
        if (typeof endDate === 'string')
            this._endDate = new Date(endDate);
        if (typeof endDate === 'object')
            this._endDate = new Date(endDate.getTime());
        this.displayEndDate = this.endDate.toLocaleDateString();
        this.tmpEndDate = null;
    }
    /**
     * @return {?}
     */
    applyClick() {
        this.dateSelected.emit(this.startDate.toLocaleDateString() + ' - ' + this.endDate.toLocaleDateString());
    }
    /**
     * @return {?}
     */
    cancelClick() {
        this.close.emit(false);
    }
}
DatePickerDirectiveComponent.decorators = [
    { type: Component, args: [{
                selector: 'date-picker-directive',
                template: "<div class=\"rl-drpicker\">\n  <div id=\"range-container\" class=\"column\" *ngIf=\"!singleDatePicker\">\n    <div *ngFor=\"let range of ranges\" class=\"range\" (mouseenter)=\"rangeHover(range)\" (mouseleave)=\"hoverExit()\" (click)=\"rangeClick(range)\">{{range.title}}</div>\n    <div class=\"buttons\">\n      <button class=\"apply\" (click)=\"applyClick()\">Apply</button>\n      <button class=\"cancel\" (click)=\"cancelClick()\">Cancel</button>\n    </div>\n  </div>\n  <div id=\"calendar-container\" class=\"column left\">\n    <div class=\"calendar-input\">\n      <input type=\"text\" placeholder=\"Start Date\" [value]=\"displayStartDate\" [class.focused]=\"focusedInput=='start'\" (change)=\"inputChanged($event, 'start')\"\n        (focus)=\"inputFocus('start')\" (blur)=\"inputBlur('start')\" />\n    </div>\n    <div class=\"calendar-table\">\n      <div class=\"calendar-period\">\n        <div class=\"nav-button prev\" (click)=\"clickPrev()\" *ngIf=\"prevAvailable()\">\n          <i class=\"calendar-nav\"></i>\n        </div>\n        {{getMonth('left')}}\n        <div class=\"nav-button next\" (click)=\"clickNext()\" *ngIf=\"nextAvailable() && singleDatePicker\">\n          <i class=\"calendar-nav\"></i>\n        </div>\n      </div>\n      <div class=\"days-header\">\n        <div class=\"day\" *ngFor=\"let day of days\">{{day}}</div>\n      </div>\n      <div class=\"calendar-row\" *ngFor=\"let row of leftCalendar.calendar\">\n        <div *ngFor=\"let col of row\" [class.today]=\"isToday(col)\" [class.off]=\"notActiveMonth(col, 'left')\" [class.active]=\"isActiveDate(col)\"\n          [class.in-range]=\"isInRange(col)\" [class.disabled]=\"isDisabled(col)\" [ngClass]=\"{'start-date':isStartDate(col), 'end-date':isEndDate(col)}\"\n          (mouseenter)=\"hoverdate(col)\" (mouseleave)=\"hoverExit()\" (click)=\"clickdate(col, 'left')\">{{col.getDate()}}</div>\n      </div>\n    </div>\n  </div>\n  <div id=\"calendar-container\" class=\"column right\" *ngIf=\"!singleDatePicker\">\n    <div class=\"calendar-input\">\n      <input type=\"text\" placeholder=\"End Date\" [value]=\"displayEndDate\" [class.focused]=\"focusedInput=='end'\" (change)=\"inputChanged($event, 'end')\"\n        (focus)=\"inputFocus('end')\" (blur)=\"inputBlur('start')\" />\n    </div>\n    <div class=\"calendar-table\">\n      <div class=\"calendar-period\">\n        <div class=\"nav-button next\" (click)=\"clickNext()\" *ngIf=\"nextAvailable()\">\n          <i class=\"calendar-nav\"></i>\n        </div>\n        {{getMonth('right')}}</div>\n      <div class=\"days-header\">\n        <div class=\"day\" *ngFor=\"let day of days\">{{day}}</div>\n      </div>\n      <div class=\"calendar-row\" *ngFor=\"let row of rightCalendar.calendar\">\n        <div *ngFor=\"let col of row\" [class.today]=\"isToday(col)\" [class.off]=\"notActiveMonth(col, 'right')\" [class.active]=\"isActiveDate(col)\"\n          (mouseleave)=\"hoverExit()\" [class.in-range]=\"isInRange(col)\" [class.disabled]=\"isDisabled(col)\" [ngClass]=\"{'start-date':isStartDate(col), 'end-date':isEndDate(col)}\"\n          (mouseenter)=\"hoverdate(col)\" (click)=\"clickdate(col, 'right')\">{{col.getDate()}}</div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".rl-drpicker{z-index:995;position:absolute;top:5px;left:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;display:flex;border:1px solid #eee;background-color:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175);width:auto;padding:10px;color:#333}.rl-drpicker.edge{right:0 !important;left: auto;}.rl-drpicker>.column{/*display:inline-block;vertical-align:top*/}.rl-drpicker>#range-container{width:140px;margin-right:10px;}.rl-drpicker>#range-container>.range{font-size:11pt;background-color:#f5f5f5;border:1px solid #f5f5f5;color:#08c;padding:5px 12px;margin-bottom:10px;cursor:pointer}.rl-drpicker>#range-container>.range:hover{background-color:#08c;border:1px solid #08c;color:#fff}.rl-drpicker>#calendar-container{margin-right:10px; width:230px;}.rl-drpicker>#calendar-container .calendar-input{padding:0 15px;margin-bottom:10px}.rl-drpicker>#calendar-container .calendar-input>input{width:100%;font-size:10pt;padding:5px 0 5px 5px;border:1px solid #ccc}.rl-drpicker>#calendar-container .calendar-input input.focused{border:1px solid #08c}.rl-drpicker>#calendar-container .calendar-period{text-align:center;font-weight:800;font-size:10pt;margin:7px 10px 3px 15px;line-height:24px;height:24px}.rl-drpicker>#calendar-container .calendar-period .nav-button{height:100%;width:32px;vertical-align:top;text-align:center;cursor:pointer}.rl-drpicker>#calendar-container .calendar-period .nav-button>.calendar-nav{border:solid #333;border-width:0 3px 3px 0;padding:5px;display:inline-block}.rl-drpicker>#calendar-container .calendar-period .nav-button.prev{float:left}.rl-drpicker>#calendar-container .calendar-period .nav-button.prev>.calendar-nav{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.rl-drpicker>#calendar-container .calendar-period .nav-button.next{float:right}.rl-drpicker>#calendar-container .calendar-period .nav-button.next>.calendar-nav{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.rl-drpicker>#calendar-container .calendar-period .nav-button:hover .calendar-nav{border:solid #08c;border-width:0 3px 3px 0}.rl-drpicker>#calendar-container .days-header>div{display:inline-block;font-weight:800;font-size:10pt;white-space:nowrap;text-align:center;width:32px;height:32px;line-height:32px}.rl-drpicker>#calendar-container .calendar-row>div{cursor:pointer;display:inline-block;font-weight:500;font-size:10pt;white-space:nowrap;text-align:center;width:32px;height:32px;line-height:32px}.rl-drpicker>#calendar-container .calendar-row>div:hover{background-color:#eee;color:#333}.rl-drpicker>#calendar-container .calendar-row>div.active:not(.off){background-color:#08c!important;color:#fff!important}.rl-drpicker>#calendar-container .calendar-row>div.in-range:not(.off){background-color:#ebf4f8;color:#333}.rl-drpicker>#calendar-container .calendar-row .today:not(.off){background:#b71c1c;color:#fff}.rl-drpicker>#calendar-container .calendar-row .off{color:#999}.rl-drpicker>#calendar-container .calendar-row .disabled{color:#999;text-decoration:line-through}.rl-drpicker>#calendar-container:last-of-type{margin-right:0}.rl-drpicker .buttons{display: flex;justify-content:space-between;}.rl-drpicker .buttons>button{padding:5px 10px;font-size:11pt;cursor:pointer}.rl-drpicker .buttons button.apply{background:#08c;color:#fff;border:1px solid #08c}.rl-drpicker .buttons button.apply:hover{background:#1565c0}.rl-drpicker .buttons button.cancel{background:#eee;border:1px solid #ddd}.rl-drpicker .buttons button.cancel:hover{background:#ccc}.rl-drpicker:before{position:absolute;display:inline-block;top:-9px;border-right:7px solid transparent;border-left:7px solid transparent;border-bottom:9px solid #eee;content:''}.rl-drpicker.edge:before{right:10px;}"]
            },] },
];
/** @nocollapse */
DatePickerDirectiveComponent.ctorParameters = () => [];
DatePickerDirectiveComponent.propDecorators = {
    minDate: [{ type: Input }],
    maxDate: [{ type: Input }],
    singleDatePicker: [{ type: Input }],
    startDate: [{ type: Input }],
    endDate: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class DatePickerDirective {
    /**
     * @param {?} ngZone
     * @param {?} renderer
     * @param {?} viewContainer
     * @param {?} componentFactoryResolver
     */
    constructor(ngZone, renderer, viewContainer, componentFactoryResolver) {
        this.ngZone = ngZone;
        this.renderer = renderer;
        this.viewContainer = viewContainer;
        this.componentFactoryResolver = componentFactoryResolver;
        this.dateselected = new EventEmitter();
        this.ngModelChanged = new EventEmitter();
        this.componentRef = null;
        this.pickerLoaded = false;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onFocus(event) {
        this.renderer.setStyle(this.viewContainer.element.nativeElement.parentElement, 'position', 'relative');
        let /** @type {?} */ height = this.viewContainer.element.nativeElement.offsetHeight;
        this.viewContainer.clear();
        let /** @type {?} */ componentFactory = this.componentFactoryResolver.resolveComponentFactory(DatePickerDirectiveComponent);
        this.componentRef = this.viewContainer.createComponent(componentFactory);
        this.componentRef.instance.minDate = this.minDate;
        this.componentRef.instance.maxDate = this.maxDate;
        this.componentRef.instance.singleDatePicker = this.singleDatePicker;
        this.componentRef.instance.startDate = this.startDate;
        this.componentRef.instance.endDate = this.endDate;
        let /** @type {?} */ elm = /** @type {?} */ (document.querySelector('.rl-drpicker'));
        elm.setAttribute('style', 'top:' + parseInt(height + 10) + 'px');
        let /** @type {?} */ rect = elm.getBoundingClientRect();
        let /** @type {?} */ l = rect.left;
        let /** @type {?} */ w = rect.width;
        let /** @type {?} */ docH = document.getElementsByTagName("body")[0].offsetHeight;
        let /** @type {?} */ docW = document.getElementsByTagName("body")[0].offsetWidth;
        let /** @type {?} */ isEntirelyVisible = (l + w <= docW);
        if (!isEntirelyVisible) {
            elm.classList.add('edge');
        }
        else {
            elm.classList.remove('edge');
        }
        this.componentRef.instance.close.subscribe(() => {
            this.componentRef.destroy();
        });
        this.componentRef.instance.dateSelected.subscribe((val) => {
            this.dateselected.emit(val);
            this.componentRef.destroy();
            this.pickerLoaded = false;
        });
    }
    /**
     * @param {?} targetElement
     * @return {?}
     */
    onClick(targetElement) {
        if (this.componentRef) {
            const /** @type {?} */ clickedDp = this.componentRef.location.nativeElement.contains(targetElement);
            const /** @type {?} */ clickedInput = this.viewContainer.element.nativeElement == targetElement;
            const /** @type {?} */ inDp = (targetElement.parentElement ? targetElement.parentElement.classList.contains('calendar-row') : false);
            if (!clickedDp && !clickedInput && !inDp) {
                if (this.componentRef) {
                    this.componentRef.destroy();
                }
            }
        }
    }
}
DatePickerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[date-picker]'
            },] },
];
/** @nocollapse */
DatePickerDirective.ctorParameters = () => [
    { type: NgZone },
    { type: Renderer2 },
    { type: ViewContainerRef },
    { type: ComponentFactoryResolver }
];
DatePickerDirective.propDecorators = {
    minDate: [{ type: Input }],
    maxDate: [{ type: Input }],
    singleDatePicker: [{ type: Input }],
    linkedCalendars: [{ type: Input }],
    startDate: [{ type: Input }],
    ngModel: [{ type: Input }],
    endDate: [{ type: Input }],
    dateselected: [{ type: Output }],
    ngModelChanged: [{ type: Output }],
    onFocus: [{ type: HostListener, args: ['focus', ['$event'],] }],
    onClick: [{ type: HostListener, args: ['document:click', ['$event.target'],] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class DatePickerModule {
}
DatePickerModule.decorators = [
    { type: NgModule, args: [{
                imports: [CommonModule
                ],
                entryComponents: [DatePickerDirectiveComponent],
                declarations: [DatePickerDirectiveComponent, DatePickerDirective],
                exports: [DatePickerDirectiveComponent, DatePickerDirective]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { DatePickerDirectiveService, DatePickerDirectiveComponent, DatePickerDirective, DatePickerModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXItZGlyZWN0aXZlLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9kYXRlLXBpY2tlci1kaXJlY3RpdmUvbGliL2RhdGUtcGlja2VyLWRpcmVjdGl2ZS5zZXJ2aWNlLnRzIiwibmc6Ly9kYXRlLXBpY2tlci1kaXJlY3RpdmUvbGliL2RhdGUtcGlja2VyLWRpcmVjdGl2ZS5jb21wb25lbnQudHMiLCJuZzovL2RhdGUtcGlja2VyLWRpcmVjdGl2ZS9saWIvZGF0ZS1waWNrZXIuZGlyZWN0aXZlLnRzIiwibmc6Ly9kYXRlLXBpY2tlci1kaXJlY3RpdmUvbGliL2RhdGUtcGlja2VyLWRpcmVjdGl2ZS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gIHByb3ZpZGVkSW46ICdyb290J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlckRpcmVjdGl2ZVNlcnZpY2Uge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBIb3N0TGlzdGVuZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZGF0ZS1waWNrZXItZGlyZWN0aXZlJyxcclxuICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJybC1kcnBpY2tlclxcXCI+XFxuICA8ZGl2IGlkPVxcXCJyYW5nZS1jb250YWluZXJcXFwiIGNsYXNzPVxcXCJjb2x1bW5cXFwiICpuZ0lmPVxcXCIhc2luZ2xlRGF0ZVBpY2tlclxcXCI+XFxuICAgIDxkaXYgKm5nRm9yPVxcXCJsZXQgcmFuZ2Ugb2YgcmFuZ2VzXFxcIiBjbGFzcz1cXFwicmFuZ2VcXFwiIChtb3VzZWVudGVyKT1cXFwicmFuZ2VIb3ZlcihyYW5nZSlcXFwiIChtb3VzZWxlYXZlKT1cXFwiaG92ZXJFeGl0KClcXFwiIChjbGljayk9XFxcInJhbmdlQ2xpY2socmFuZ2UpXFxcIj57e3JhbmdlLnRpdGxlfX08L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxuICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYXBwbHlcXFwiIChjbGljayk9XFxcImFwcGx5Q2xpY2soKVxcXCI+QXBwbHk8L2J1dHRvbj5cXG4gICAgICA8YnV0dG9uIGNsYXNzPVxcXCJjYW5jZWxcXFwiIChjbGljayk9XFxcImNhbmNlbENsaWNrKClcXFwiPkNhbmNlbDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbiAgPGRpdiBpZD1cXFwiY2FsZW5kYXItY29udGFpbmVyXFxcIiBjbGFzcz1cXFwiY29sdW1uIGxlZnRcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjYWxlbmRhci1pbnB1dFxcXCI+XFxuICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJTdGFydCBEYXRlXFxcIiBbdmFsdWVdPVxcXCJkaXNwbGF5U3RhcnREYXRlXFxcIiBbY2xhc3MuZm9jdXNlZF09XFxcImZvY3VzZWRJbnB1dD09J3N0YXJ0J1xcXCIgKGNoYW5nZSk9XFxcImlucHV0Q2hhbmdlZCgkZXZlbnQsICdzdGFydCcpXFxcIlxcbiAgICAgICAgKGZvY3VzKT1cXFwiaW5wdXRGb2N1cygnc3RhcnQnKVxcXCIgKGJsdXIpPVxcXCJpbnB1dEJsdXIoJ3N0YXJ0JylcXFwiIC8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjYWxlbmRhci10YWJsZVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY2FsZW5kYXItcGVyaW9kXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5hdi1idXR0b24gcHJldlxcXCIgKGNsaWNrKT1cXFwiY2xpY2tQcmV2KClcXFwiICpuZ0lmPVxcXCJwcmV2QXZhaWxhYmxlKClcXFwiPlxcbiAgICAgICAgICA8aSBjbGFzcz1cXFwiY2FsZW5kYXItbmF2XFxcIj48L2k+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIHt7Z2V0TW9udGgoJ2xlZnQnKX19XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuYXYtYnV0dG9uIG5leHRcXFwiIChjbGljayk9XFxcImNsaWNrTmV4dCgpXFxcIiAqbmdJZj1cXFwibmV4dEF2YWlsYWJsZSgpICYmIHNpbmdsZURhdGVQaWNrZXJcXFwiPlxcbiAgICAgICAgICA8aSBjbGFzcz1cXFwiY2FsZW5kYXItbmF2XFxcIj48L2k+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJkYXlzLWhlYWRlclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkYXlcXFwiICpuZ0Zvcj1cXFwibGV0IGRheSBvZiBkYXlzXFxcIj57e2RheX19PC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY2FsZW5kYXItcm93XFxcIiAqbmdGb3I9XFxcImxldCByb3cgb2YgbGVmdENhbGVuZGFyLmNhbGVuZGFyXFxcIj5cXG4gICAgICAgIDxkaXYgKm5nRm9yPVxcXCJsZXQgY29sIG9mIHJvd1xcXCIgW2NsYXNzLnRvZGF5XT1cXFwiaXNUb2RheShjb2wpXFxcIiBbY2xhc3Mub2ZmXT1cXFwibm90QWN0aXZlTW9udGgoY29sLCAnbGVmdCcpXFxcIiBbY2xhc3MuYWN0aXZlXT1cXFwiaXNBY3RpdmVEYXRlKGNvbClcXFwiXFxuICAgICAgICAgIFtjbGFzcy5pbi1yYW5nZV09XFxcImlzSW5SYW5nZShjb2wpXFxcIiBbY2xhc3MuZGlzYWJsZWRdPVxcXCJpc0Rpc2FibGVkKGNvbClcXFwiIFtuZ0NsYXNzXT1cXFwieydzdGFydC1kYXRlJzppc1N0YXJ0RGF0ZShjb2wpLCAnZW5kLWRhdGUnOmlzRW5kRGF0ZShjb2wpfVxcXCJcXG4gICAgICAgICAgKG1vdXNlZW50ZXIpPVxcXCJob3ZlcmRhdGUoY29sKVxcXCIgKG1vdXNlbGVhdmUpPVxcXCJob3ZlckV4aXQoKVxcXCIgKGNsaWNrKT1cXFwiY2xpY2tkYXRlKGNvbCwgJ2xlZnQnKVxcXCI+e3tjb2wuZ2V0RGF0ZSgpfX08L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICA8L2Rpdj5cXG4gIDxkaXYgaWQ9XFxcImNhbGVuZGFyLWNvbnRhaW5lclxcXCIgY2xhc3M9XFxcImNvbHVtbiByaWdodFxcXCIgKm5nSWY9XFxcIiFzaW5nbGVEYXRlUGlja2VyXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY2FsZW5kYXItaW5wdXRcXFwiPlxcbiAgICAgIDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBwbGFjZWhvbGRlcj1cXFwiRW5kIERhdGVcXFwiIFt2YWx1ZV09XFxcImRpc3BsYXlFbmREYXRlXFxcIiBbY2xhc3MuZm9jdXNlZF09XFxcImZvY3VzZWRJbnB1dD09J2VuZCdcXFwiIChjaGFuZ2UpPVxcXCJpbnB1dENoYW5nZWQoJGV2ZW50LCAnZW5kJylcXFwiXFxuICAgICAgICAoZm9jdXMpPVxcXCJpbnB1dEZvY3VzKCdlbmQnKVxcXCIgKGJsdXIpPVxcXCJpbnB1dEJsdXIoJ3N0YXJ0JylcXFwiIC8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjYWxlbmRhci10YWJsZVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY2FsZW5kYXItcGVyaW9kXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5hdi1idXR0b24gbmV4dFxcXCIgKGNsaWNrKT1cXFwiY2xpY2tOZXh0KClcXFwiICpuZ0lmPVxcXCJuZXh0QXZhaWxhYmxlKClcXFwiPlxcbiAgICAgICAgICA8aSBjbGFzcz1cXFwiY2FsZW5kYXItbmF2XFxcIj48L2k+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIHt7Z2V0TW9udGgoJ3JpZ2h0Jyl9fTwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImRheXMtaGVhZGVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImRheVxcXCIgKm5nRm9yPVxcXCJsZXQgZGF5IG9mIGRheXNcXFwiPnt7ZGF5fX08L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjYWxlbmRhci1yb3dcXFwiICpuZ0Zvcj1cXFwibGV0IHJvdyBvZiByaWdodENhbGVuZGFyLmNhbGVuZGFyXFxcIj5cXG4gICAgICAgIDxkaXYgKm5nRm9yPVxcXCJsZXQgY29sIG9mIHJvd1xcXCIgW2NsYXNzLnRvZGF5XT1cXFwiaXNUb2RheShjb2wpXFxcIiBbY2xhc3Mub2ZmXT1cXFwibm90QWN0aXZlTW9udGgoY29sLCAncmlnaHQnKVxcXCIgW2NsYXNzLmFjdGl2ZV09XFxcImlzQWN0aXZlRGF0ZShjb2wpXFxcIlxcbiAgICAgICAgICAobW91c2VsZWF2ZSk9XFxcImhvdmVyRXhpdCgpXFxcIiBbY2xhc3MuaW4tcmFuZ2VdPVxcXCJpc0luUmFuZ2UoY29sKVxcXCIgW2NsYXNzLmRpc2FibGVkXT1cXFwiaXNEaXNhYmxlZChjb2wpXFxcIiBbbmdDbGFzc109XFxcInsnc3RhcnQtZGF0ZSc6aXNTdGFydERhdGUoY29sKSwgJ2VuZC1kYXRlJzppc0VuZERhdGUoY29sKX1cXFwiXFxuICAgICAgICAgIChtb3VzZWVudGVyKT1cXFwiaG92ZXJkYXRlKGNvbClcXFwiIChjbGljayk9XFxcImNsaWNrZGF0ZShjb2wsICdyaWdodCcpXFxcIj57e2NvbC5nZXREYXRlKCl9fTwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblwiLFxyXG4gIHN0eWxlczogW1wiLnJsLWRycGlja2Vye3otaW5kZXg6OTk1O3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1cHg7bGVmdDowO2ZvbnQtZmFtaWx5OlxcXCJIZWx2ZXRpY2EgTmV1ZVxcXCIsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7ZGlzcGxheTpmbGV4O2JvcmRlcjoxcHggc29saWQgI2VlZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7LXdlYmtpdC1ib3gtc2hhZG93OjAgNnB4IDEycHggcmdiYSgwLDAsMCwuMTc1KTtib3gtc2hhZG93OjAgNnB4IDEycHggcmdiYSgwLDAsMCwuMTc1KTt3aWR0aDphdXRvO3BhZGRpbmc6MTBweDtjb2xvcjojMzMzfS5ybC1kcnBpY2tlci5lZGdle3JpZ2h0OjAgIWltcG9ydGFudDtsZWZ0OiBhdXRvO30ucmwtZHJwaWNrZXI+LmNvbHVtbnsvKmRpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOnRvcCovfS5ybC1kcnBpY2tlcj4jcmFuZ2UtY29udGFpbmVye3dpZHRoOjE0MHB4O21hcmdpbi1yaWdodDoxMHB4O30ucmwtZHJwaWNrZXI+I3JhbmdlLWNvbnRhaW5lcj4ucmFuZ2V7Zm9udC1zaXplOjExcHQ7YmFja2dyb3VuZC1jb2xvcjojZjVmNWY1O2JvcmRlcjoxcHggc29saWQgI2Y1ZjVmNTtjb2xvcjojMDhjO3BhZGRpbmc6NXB4IDEycHg7bWFyZ2luLWJvdHRvbToxMHB4O2N1cnNvcjpwb2ludGVyfS5ybC1kcnBpY2tlcj4jcmFuZ2UtY29udGFpbmVyPi5yYW5nZTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMwOGM7Ym9yZGVyOjFweCBzb2xpZCAjMDhjO2NvbG9yOiNmZmZ9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXJ7bWFyZ2luLXJpZ2h0OjEwcHg7IHdpZHRoOjIzMHB4O30ucmwtZHJwaWNrZXI+I2NhbGVuZGFyLWNvbnRhaW5lciAuY2FsZW5kYXItaW5wdXR7cGFkZGluZzowIDE1cHg7bWFyZ2luLWJvdHRvbToxMHB4fS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5jYWxlbmRhci1pbnB1dD5pbnB1dHt3aWR0aDoxMDAlO2ZvbnQtc2l6ZToxMHB0O3BhZGRpbmc6NXB4IDAgNXB4IDVweDtib3JkZXI6MXB4IHNvbGlkICNjY2N9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLWlucHV0IGlucHV0LmZvY3VzZWR7Ym9yZGVyOjFweCBzb2xpZCAjMDhjfS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5jYWxlbmRhci1wZXJpb2R7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6ODAwO2ZvbnQtc2l6ZToxMHB0O21hcmdpbjo3cHggMTBweCAzcHggMTVweDtsaW5lLWhlaWdodDoyNHB4O2hlaWdodDoyNHB4fS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5jYWxlbmRhci1wZXJpb2QgLm5hdi1idXR0b257aGVpZ2h0OjEwMCU7d2lkdGg6MzJweDt2ZXJ0aWNhbC1hbGlnbjp0b3A7dGV4dC1hbGlnbjpjZW50ZXI7Y3Vyc29yOnBvaW50ZXJ9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXBlcmlvZCAubmF2LWJ1dHRvbj4uY2FsZW5kYXItbmF2e2JvcmRlcjpzb2xpZCAjMzMzO2JvcmRlci13aWR0aDowIDNweCAzcHggMDtwYWRkaW5nOjVweDtkaXNwbGF5OmlubGluZS1ibG9ja30ucmwtZHJwaWNrZXI+I2NhbGVuZGFyLWNvbnRhaW5lciAuY2FsZW5kYXItcGVyaW9kIC5uYXYtYnV0dG9uLnByZXZ7ZmxvYXQ6bGVmdH0ucmwtZHJwaWNrZXI+I2NhbGVuZGFyLWNvbnRhaW5lciAuY2FsZW5kYXItcGVyaW9kIC5uYXYtYnV0dG9uLnByZXY+LmNhbGVuZGFyLW5hdnt0cmFuc2Zvcm06cm90YXRlKDEzNWRlZyk7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDEzNWRlZyl9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXBlcmlvZCAubmF2LWJ1dHRvbi5uZXh0e2Zsb2F0OnJpZ2h0fS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5jYWxlbmRhci1wZXJpb2QgLm5hdi1idXR0b24ubmV4dD4uY2FsZW5kYXItbmF2e3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0ucmwtZHJwaWNrZXI+I2NhbGVuZGFyLWNvbnRhaW5lciAuY2FsZW5kYXItcGVyaW9kIC5uYXYtYnV0dG9uOmhvdmVyIC5jYWxlbmRhci1uYXZ7Ym9yZGVyOnNvbGlkICMwOGM7Ym9yZGVyLXdpZHRoOjAgM3B4IDNweCAwfS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5kYXlzLWhlYWRlcj5kaXZ7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC13ZWlnaHQ6ODAwO2ZvbnQtc2l6ZToxMHB0O3doaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2xpbmUtaGVpZ2h0OjMycHh9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXJvdz5kaXZ7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC13ZWlnaHQ6NTAwO2ZvbnQtc2l6ZToxMHB0O3doaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2xpbmUtaGVpZ2h0OjMycHh9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXJvdz5kaXY6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWVlO2NvbG9yOiMzMzN9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXJvdz5kaXYuYWN0aXZlOm5vdCgub2ZmKXtiYWNrZ3JvdW5kLWNvbG9yOiMwOGMhaW1wb3J0YW50O2NvbG9yOiNmZmYhaW1wb3J0YW50fS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyIC5jYWxlbmRhci1yb3c+ZGl2LmluLXJhbmdlOm5vdCgub2ZmKXtiYWNrZ3JvdW5kLWNvbG9yOiNlYmY0Zjg7Y29sb3I6IzMzM30ucmwtZHJwaWNrZXI+I2NhbGVuZGFyLWNvbnRhaW5lciAuY2FsZW5kYXItcm93IC50b2RheTpub3QoLm9mZil7YmFja2dyb3VuZDojYjcxYzFjO2NvbG9yOiNmZmZ9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXJvdyAub2Zme2NvbG9yOiM5OTl9LnJsLWRycGlja2VyPiNjYWxlbmRhci1jb250YWluZXIgLmNhbGVuZGFyLXJvdyAuZGlzYWJsZWR7Y29sb3I6Izk5OTt0ZXh0LWRlY29yYXRpb246bGluZS10aHJvdWdofS5ybC1kcnBpY2tlcj4jY2FsZW5kYXItY29udGFpbmVyOmxhc3Qtb2YtdHlwZXttYXJnaW4tcmlnaHQ6MH0ucmwtZHJwaWNrZXIgLmJ1dHRvbnN7ZGlzcGxheTogZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjt9LnJsLWRycGlja2VyIC5idXR0b25zPmJ1dHRvbntwYWRkaW5nOjVweCAxMHB4O2ZvbnQtc2l6ZToxMXB0O2N1cnNvcjpwb2ludGVyfS5ybC1kcnBpY2tlciAuYnV0dG9ucyBidXR0b24uYXBwbHl7YmFja2dyb3VuZDojMDhjO2NvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjMDhjfS5ybC1kcnBpY2tlciAuYnV0dG9ucyBidXR0b24uYXBwbHk6aG92ZXJ7YmFja2dyb3VuZDojMTU2NWMwfS5ybC1kcnBpY2tlciAuYnV0dG9ucyBidXR0b24uY2FuY2Vse2JhY2tncm91bmQ6I2VlZTtib3JkZXI6MXB4IHNvbGlkICNkZGR9LnJsLWRycGlja2VyIC5idXR0b25zIGJ1dHRvbi5jYW5jZWw6aG92ZXJ7YmFja2dyb3VuZDojY2NjfS5ybC1kcnBpY2tlcjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTppbmxpbmUtYmxvY2s7dG9wOi05cHg7Ym9yZGVyLXJpZ2h0OjdweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo3cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTo5cHggc29saWQgI2VlZTtjb250ZW50OicnfS5ybC1kcnBpY2tlci5lZGdlOmJlZm9yZXtyaWdodDoxMHB4O31cIl1cclxufSlcclxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJEaXJlY3RpdmVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBfbWluZGF0ZTogYW55ID0gbnVsbDtcclxuICBASW5wdXQoKVxyXG4gIHNldCBtaW5EYXRlKGRhdGUpIHtcclxuICAgIGlmIChkYXRlKSB7XHJcbiAgICAgIHRoaXMuX21pbmRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IG1pbkRhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWluZGF0ZTtcclxuICB9XHJcbiAgX21heGRhdGU6IGFueSA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBzZXQgbWF4RGF0ZShkYXRlKSB7XHJcbiAgICBpZiAoZGF0ZSkge1xyXG4gICAgICB0aGlzLl9tYXhkYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBtYXhEYXRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21heGRhdGU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKSBzaW5nbGVEYXRlUGlja2VyPzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAvLyBfc2luZ2xlRGF0ZVBpY2tlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIC8vIEBJbnB1dCgpXHJcbiAgLy8gc2V0IHNpbmdsZURhdGVQaWNrZXIoaXNTaW5nbGUpIHtcclxuICAvLyAgIGlmIChpc1NpbmdsZSkge1xyXG4gIC8vICAgICB0aGlzLl9zaW5nbGVEYXRlUGlja2VyID0gaXNTaW5nbGU7XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG4gIC8vIGdldCBzaW5nbGVEYXRlUGlja2VyKCkge1xyXG4gIC8vICAgcmV0dXJuIHRoaXMuX3NpbmdsZURhdGVQaWNrZXI7XHJcbiAgLy8gfVxyXG4gIGxpbmtlZENhbGVuZGFycyA9IHRydWU7XHJcblxyXG4gIF9zdGFydERhdGU6IGFueTtcclxuICBASW5wdXQoKVxyXG4gIHNldCBzdGFydERhdGUoZGF0ZSkge1xyXG4gICAgaWYgKGRhdGUpIHtcclxuICAgICAgdGhpcy5fc3RhcnREYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBzdGFydERhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3RhcnREYXRlO1xyXG4gIH1cclxuXHJcbiAgX2VuZERhdGU6IGFueTtcclxuICBASW5wdXQoKVxyXG4gIHNldCBlbmREYXRlKGRhdGUpIHtcclxuICAgIGlmIChkYXRlKSB7XHJcbiAgICAgIHRoaXMuX2VuZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGVuZERhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZW5kRGF0ZTtcclxuICB9XHJcblxyXG4gIG1vbnRoTmFtZXMgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XHJcbiAgdG1wRGF0ZTogYW55ID0gbnVsbDtcclxuICB0bXBFbmREYXRlOiBhbnkgPSBudWxsO1xyXG4gIGxlZnRDYWxlbmRhcjtcclxuICByaWdodENhbGVuZGFyO1xyXG4gIHJhbmdlczogYW55W107XHJcbiAgZGF5czogYW55ID0gWydTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJ107XHJcbiAgZGlzcGxheVN0YXJ0RGF0ZTogc3RyaW5nO1xyXG4gIGRpc3BsYXlFbmREYXRlOiBzdHJpbmc7XHJcbiAgZm9jdXNlZElucHV0OiBzdHJpbmcgPSAnc3RhcnQnO1xyXG4gIGNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIGRhdGVTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMucmFuZ2VzID0gW3tcclxuICAgICAgdGl0bGU6ICdUb2RheScsXHJcbiAgICAgIHBlcmlvZDogW25ldyBEYXRlKCksIG5ldyBEYXRlKCldXHJcbiAgICB9LCB7XHJcbiAgICAgIHRpdGxlOiAnWWVzdGVyZGF5JyxcclxuICAgICAgcGVyaW9kOiBbdGhpcy5nZXRZZXN0ZXJkYXkoKSwgdGhpcy5nZXRZZXN0ZXJkYXkoKV1cclxuICAgIH0sIHtcclxuICAgICAgdGl0bGU6ICdMYXN0IDcgRGF5cycsXHJcbiAgICAgIHBlcmlvZDogW3RoaXMuZ2V0UGFzdDdEYXlzKCksIG5ldyBEYXRlKCldXHJcbiAgICB9LCB7XHJcbiAgICAgIHRpdGxlOiAnTGFzdCAzMCBEYXlzJyxcclxuICAgICAgcGVyaW9kOiBbdGhpcy5nZXRQYXN0MzBEYXlzKCksIG5ldyBEYXRlKCldXHJcbiAgICB9LCB7XHJcbiAgICAgIHRpdGxlOiAnVGhpcyBNb250aCcsXHJcbiAgICAgIHBlcmlvZDogW3RoaXMuZ2V0Rmlyc3REYXkoKSwgbmV3IERhdGUoKV1cclxuICAgIH0sIHtcclxuICAgICAgdGl0bGU6ICdMYXN0IE1vbnRoJyxcclxuICAgICAgcGVyaW9kOiBbdGhpcy5nZXRGaXJzdERheVByZXYoKSwgdGhpcy5nZXRMYXN0RGF5UHJldigpXVxyXG4gICAgfV07XHJcbiAgICBpZiAoIXRoaXMuc3RhcnREYXRlKSB7XHJcbiAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmxlZnRDYWxlbmRhciA9IHsgbW9udGg6IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKSksIGNhbGVuZGFyOiBudWxsIH07XHJcblxyXG4gICAgaWYgKCF0aGlzLmVuZERhdGUpIHtcclxuICAgICAgdGhpcy5fZW5kRGF0ZSA9IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlKTtcclxuICAgIH1cclxuICAgIHRoaXMucmlnaHRDYWxlbmRhciA9IHsgbW9udGg6IHRoaXMuZ2V0TmV4dE1vbnRoKHRoaXMuZW5kRGF0ZSksIGNhbGVuZGFyOiBudWxsIH07XHJcblxyXG4gICAgdGhpcy5kaXNwbGF5U3RhcnREYXRlID0gdGhpcy5zdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7O1xyXG4gICAgdGhpcy5kaXNwbGF5RW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTs7XHJcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCdsZWZ0Jyk7XHJcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCdyaWdodCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0WWVzdGVyZGF5KCkge1xyXG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gMSk7XHJcbiAgICByZXR1cm4gZGF0ZTtcclxuICB9XHJcbiAgZ2V0UGFzdDdEYXlzKCkge1xyXG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gNik7XHJcbiAgICByZXR1cm4gZGF0ZTtcclxuICB9XHJcbiAgZ2V0UGFzdDMwRGF5cygpIHtcclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIDI5KTtcclxuICAgIHJldHVybiBkYXRlO1xyXG4gIH1cclxuICBnZXRGaXJzdERheSgpIHtcclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgMSk7XHJcbiAgfVxyXG5cclxuICBnZXRGaXJzdERheVByZXYoKSB7XHJcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAoZGF0ZS5nZXRNb250aCgpIC0gMSksIDEpO1xyXG4gIH1cclxuICBnZXRMYXN0RGF5UHJldigpIHtcclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgMCk7XHJcbiAgfVxyXG4gIGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIDApLmdldERhdGUoKTtcclxuICB9XHJcbiAgZ2V0TGFzdE1vbnRoKGRhdGUpIHtcclxuICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgbGV0IGMgPSBuZXcgRGF0ZShkLmdldFRpbWUoKSk7XHJcbiAgICBjLnNldE1vbnRoKChkLmdldE1vbnRoKCkgLSAxKSk7XHJcbiAgICByZXR1cm4gYztcclxuICB9XHJcbiAgZ2V0TmV4dE1vbnRoKGRhdGUpIHtcclxuICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgMSkpO1xyXG4gIH1cclxuICBnZXRNb250aFllYXIoZGF0ZSkge1xyXG4gICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgZGF0ZS5nZXRNb250aCgpO1xyXG4gIH1cclxuICBpc0JlZm9yZShkMSwgZDIpIHtcclxuICAgIHJldHVybiBkMSA8IGQyO1xyXG4gIH1cclxuICBpc0FmdGVyKGQxLCBkMikge1xyXG4gICAgcmV0dXJuIGQyIDwgZDE7XHJcbiAgfVxyXG4gIHJlbmRlckNhbGVuZGFyKHNpZGU6IHN0cmluZykge1xyXG4gICAgbGV0IGRhdGUgPSAoc2lkZSA9PSAnbGVmdCcgPyB0aGlzLmxlZnRDYWxlbmRhci5tb250aCA6IHRoaXMucmlnaHRDYWxlbmRhci5tb250aCk7XHJcbiAgICBsZXQgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICBsZXQgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCBkYXlzSW5Nb250aCA9IHRoaXMuZGF5c0luTW9udGgobW9udGggKyAxLCB5ZWFyKTtcclxuICAgIGxldCBmaXJzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTtcclxuICAgIGxldCBsYXN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheXNJbk1vbnRoKTtcclxuICAgIGxldCBsYXN0TW9udGggPSB0aGlzLmdldExhc3RNb250aChmaXJzdERheSkuZ2V0TW9udGgoKTtcclxuICAgIGxldCBsYXN0WWVhciA9IHRoaXMuZ2V0TGFzdE1vbnRoKGZpcnN0RGF5KS5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IGRheXNJbkxhc3RNb250aCA9IHRoaXMuZGF5c0luTW9udGgobGFzdE1vbnRoICsgMSwgbGFzdFllYXIpO1xyXG4gICAgbGV0IGRheU9mV2VlayA9IGZpcnN0RGF5LmdldERheSgpO1xyXG4gICAgbGV0IGNhbGVuZGFyID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICBjYWxlbmRhcltpXSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzdGFydERheSA9IGRheXNJbkxhc3RNb250aCAtIGRheU9mV2VlayArIDE7XHJcblxyXG4gICAgaWYgKHN0YXJ0RGF5ID4gZGF5c0luTGFzdE1vbnRoKSB7XHJcbiAgICAgIHN0YXJ0RGF5IC09IDc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRheU9mV2VlayA9PT0gMCkge1xyXG4gICAgICBzdGFydERheSA9IGRheXNJbkxhc3RNb250aCAtIDY7XHJcbiAgICB9XHJcbiAgICBsZXQgY3VyRGF0ZSA9IG5ldyBEYXRlKGxhc3RZZWFyLCBsYXN0TW9udGgsIHN0YXJ0RGF5KTtcclxuXHJcbiAgICBsZXQgY29sLCByb3c7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgY29sID0gMCwgcm93ID0gMDsgaSA8IDQyOyBpKysgLCBjb2wrKyAsIGN1ckRhdGUuc2V0RGF0ZShjdXJEYXRlLmdldERhdGUoKSArIDEpKSB7XHJcblxyXG4gICAgICBpZiAoaSA+IDAgJiYgY29sICUgNyA9PT0gMCkge1xyXG4gICAgICAgIGNvbCA9IDA7XHJcbiAgICAgICAgcm93Kys7XHJcbiAgICAgIH1cclxuICAgICAgY2FsZW5kYXJbcm93XVtjb2xdID0gbmV3IERhdGUoY3VyRGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICBjdXJEYXRlLnNldEhvdXJzKDEyKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgY2FsZW5kYXJbcm93XVtjb2xdLnRvTG9jYWxlRGF0ZVN0cmluZygpID09IHRoaXMubWluRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSAmJiB0aGlzLmlzQmVmb3JlKGNhbGVuZGFyW3Jvd11bY29sXSwgdGhpcy5taW5EYXRlKSAmJiBzaWRlID09ICdsZWZ0Jykge1xyXG4gICAgICAgIGNhbGVuZGFyW3Jvd11bY29sXSA9IG5ldyBEYXRlKHRoaXMubWluRGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5tYXhEYXRlICYmIGNhbGVuZGFyW3Jvd11bY29sXS50b0xvY2FsZURhdGVTdHJpbmcoKSA9PSB0aGlzLm1heERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkgJiYgdGhpcy5pc0FmdGVyKGNhbGVuZGFyW3Jvd11bY29sXSwgdGhpcy5tYXhEYXRlKSAmJiBzaWRlID09ICdyaWdodCcpIHtcclxuICAgICAgICBjYWxlbmRhcltyb3ddW2NvbF0gPSBuZXcgRGF0ZSh0aGlzLm1heERhdGUuZ2V0VGltZSgpKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvL21ha2UgdGhlIGNhbGVuZGFyIG9iamVjdCBhdmFpbGFibGUgdG8gaG92ZXJEYXRlL2NsaWNrRGF0ZVxyXG4gICAgaWYgKHNpZGUgPT0gJ2xlZnQnKSB7XHJcbiAgICAgIHRoaXMubGVmdENhbGVuZGFyLmNhbGVuZGFyID0gY2FsZW5kYXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJpZ2h0Q2FsZW5kYXIuY2FsZW5kYXIgPSBjYWxlbmRhcjtcclxuICAgIH1cclxuICB9XHJcbiAgaXNUb2RheShkYXkpIHtcclxuICAgIGlmICghZGF5KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpID09PSBkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgfVxyXG4gIGlzQWN0aXZlRGF0ZShkYXkpIHtcclxuICAgIGlmIChkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgPT0gdGhpcy5zdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW5kRGF0ZSAmJiBkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgPT0gdGhpcy5lbmREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpc1N0YXJ0RGF0ZShkYXkpIHtcclxuICAgIGlmIChkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgPT0gdGhpcy5zdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGlzRW5kRGF0ZShkYXkpIHtcclxuICAgIGlmICh0aGlzLmVuZERhdGUgJiYgZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygpID09IHRoaXMuZW5kRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgaXNEaXNhYmxlZChkYXkpIHtcclxuICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgdGhpcy5pc0JlZm9yZShkYXksIHRoaXMubWluRGF0ZSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWF4RGF0ZSAmJiB0aGlzLmlzQWZ0ZXIoZGF5LCB0aGlzLm1heERhdGUpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpc0luUmFuZ2UoZGF5KSB7XHJcbiAgICBpZiAodGhpcy5lbmREYXRlKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWZ0ZXIoZGF5LCB0aGlzLnN0YXJ0RGF0ZSkgJiYgdGhpcy5pc0JlZm9yZShkYXksIHRoaXMuZW5kRGF0ZSkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWZ0ZXIoZGF5LCB0aGlzLnN0YXJ0RGF0ZSkgJiYgdGhpcy5pc0JlZm9yZShkYXksIHRoaXMudG1wRGF0ZSkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgbmV4dEF2YWlsYWJsZSgpIHtcclxuICAgIGxldCBjYWxlbmRhciA9ICh0aGlzLnNpbmdsZURhdGVQaWNrZXIgPyB0aGlzLmxlZnRDYWxlbmRhciA6IHRoaXMucmlnaHRDYWxlbmRhcik7XHJcbiAgICBsZXQgbGRheSA9IG5ldyBEYXRlKGNhbGVuZGFyLm1vbnRoLmdldEZ1bGxZZWFyKCksIGNhbGVuZGFyLm1vbnRoLmdldE1vbnRoKCkgKyAxLCAwKTtcclxuICAgIGlmICghdGhpcy5tYXhEYXRlIHx8IHRoaXMuaXNBZnRlcih0aGlzLm1heERhdGUsIGxkYXkpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcmV2QXZhaWxhYmxlKCkge1xyXG4gICAgbGV0IGNhbGVuZGFyID0gdGhpcy5sZWZ0Q2FsZW5kYXI7XHJcbiAgICBsZXQgZmRheSA9IG5ldyBEYXRlKGNhbGVuZGFyLm1vbnRoLmdldEZ1bGxZZWFyKCksIGNhbGVuZGFyLm1vbnRoLmdldE1vbnRoKCksIDEpO1xyXG4gICAgaWYgKCF0aGlzLm1pbkRhdGUgfHwgdGhpcy5pc0JlZm9yZSh0aGlzLm1pbkRhdGUsIGZkYXkpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBub3RBY3RpdmVNb250aChkYXksIHNpZGUpIHtcclxuICAgIGxldCBjYWwgPSAoc2lkZSA9PSAnbGVmdCcgPyB0aGlzLmxlZnRDYWxlbmRhci5jYWxlbmRhciA6IHRoaXMucmlnaHRDYWxlbmRhci5jYWxlbmRhcik7XHJcbiAgICBpZiAoZGF5LmdldE1vbnRoKCkgIT0gY2FsWzFdWzFdLmdldE1vbnRoKCkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGdldE1vbnRoKHNpZGUpIHtcclxuICAgIGxldCBjYWwgPSAoc2lkZSA9PSAnbGVmdCcgPyB0aGlzLmxlZnRDYWxlbmRhci5jYWxlbmRhciA6IHRoaXMucmlnaHRDYWxlbmRhci5jYWxlbmRhcik7XHJcbiAgICByZXR1cm4gdGhpcy5tb250aE5hbWVzW2NhbFsxXVsxXS5nZXRNb250aCgpXSArIFwiIFwiICsgY2FsWzFdWzFdLmdldEZ1bGxZZWFyKCk7XHJcbiAgfVxyXG4gIGNsaWNrUHJldigpIHtcclxuICAgIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLnNldE1vbnRoKHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLmdldE1vbnRoKCkgLSAxKTtcclxuICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoJ2xlZnQnKTtcclxuICAgIGlmICh0aGlzLnJpZ2h0Q2FsZW5kYXIuY2FsZW5kYXIpIHtcclxuICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLnNldE1vbnRoKHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5nZXRNb250aCgpIC0gMSk7XHJcbiAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoJ3JpZ2h0Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNsaWNrTmV4dCgpIHtcclxuICAgIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLnNldE1vbnRoKHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLmdldE1vbnRoKCkgKyAxKTtcclxuICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoJ2xlZnQnKTtcclxuICAgIGlmICh0aGlzLnJpZ2h0Q2FsZW5kYXIuY2FsZW5kYXIpIHtcclxuICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLnNldE1vbnRoKHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5nZXRNb250aCgpICsgMSk7XHJcbiAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoJ3JpZ2h0Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNsaWNrZGF0ZShkYXksIHNpZGUpIHtcclxuICAgIGlmICh0aGlzLmlzRGlzYWJsZWQoZGF5KSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbmREYXRlIHx8IHRoaXMuaXNCZWZvcmUoZGF5LCB0aGlzLnN0YXJ0RGF0ZSkpIHtcclxuICAgICAgdGhpcy5fZW5kRGF0ZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuc2V0U3RhcnREYXRlKGRheSk7XHJcbiAgICAgIGlmICh0aGlzLnRtcEVuZERhdGUpIHtcclxuICAgICAgICB0aGlzLnNldEVuZERhdGUodGhpcy50bXBFbmREYXRlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmZvY3VzZWRJbnB1dCA9ICdlbmQnO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmVuZERhdGUgJiYgdGhpcy5pc0JlZm9yZShkYXksIHRoaXMuc3RhcnREYXRlKSkge1xyXG4gICAgICB0aGlzLnNldEVuZERhdGUodGhpcy5zdGFydERhdGUpO1xyXG4gICAgICB0aGlzLmZvY3VzZWRJbnB1dCA9ICdzdGFydCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldEVuZERhdGUoZGF5KTtcclxuICAgICAgdGhpcy5mb2N1c2VkSW5wdXQgPSAnc3RhcnQnO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlcikge1xyXG4gICAgICB0aGlzLnNldEVuZERhdGUodGhpcy5zdGFydERhdGUpO1xyXG4gICAgICB0aGlzLmZvY3VzZWRJbnB1dCA9ICdzdGFydCc7XHJcbiAgICAgIHRoaXMuZGF0ZVNlbGVjdGVkLmVtaXQodGhpcy5zdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG4gIHJhbmdlQ2xpY2socmFuZ2UpIHtcclxuICAgIHRoaXMuc2V0U3RhcnREYXRlKHJhbmdlLnBlcmlvZFswXSk7XHJcbiAgICB0aGlzLnNldEVuZERhdGUocmFuZ2UucGVyaW9kWzFdKTtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gICAgdGhpcy5hcHBseUNsaWNrKCk7XHJcbiAgfVxyXG4gIHJhbmdlSG92ZXIocmFuZ2UpIHtcclxuICAgIHRoaXMuZGlzcGxheVN0YXJ0RGF0ZSA9IHJhbmdlLnBlcmlvZFswXS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIHRoaXMuZGlzcGxheUVuZERhdGUgPSByYW5nZS5wZXJpb2RbMV0udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgfVxyXG4gIGhvdmVyRXhpdCgpIHtcclxuICAgIHRoaXMuZGlzcGxheVN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgdGhpcy5kaXNwbGF5RW5kRGF0ZSA9ICh0aGlzLmVuZERhdGUgPyB0aGlzLmVuZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkgOiB0aGlzLmRpc3BsYXlTdGFydERhdGUpO1xyXG4gIH1cclxuICBob3ZlcmRhdGUoZGF5KSB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc2FibGVkKGRheSkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy50bXBEYXRlID0gbmV3IERhdGUoZGF5LmdldFRpbWUoKSk7XHJcbiAgICBpZiAodGhpcy5mb2N1c2VkSW5wdXQgPT09ICdzdGFydCcpIHtcclxuICAgICAgdGhpcy5kaXNwbGF5U3RhcnREYXRlID0gdGhpcy50bXBEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kaXNwbGF5RW5kRGF0ZSA9IHRoaXMudG1wRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIH1cclxuICB9XHJcbiAgaW5wdXRGb2N1cyhzaWRlKSB7XHJcbiAgICB0aGlzLmZvY3VzZWRJbnB1dCA9IHNpZGU7XHJcbiAgICBpZiAodGhpcy5lbmREYXRlKSB7XHJcbiAgICAgIHRoaXMudG1wRW5kRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZW5kRGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICBpZiAoc2lkZSA9PSAnc3RhcnQnKSB7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2lkZSA9PSAnZW5kJykge1xyXG4gICAgICAgIHRoaXMuX2VuZERhdGUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBpbnB1dEJsdXIoc2lkZSkge1xyXG4gIH1cclxuICBpbnB1dENoYW5nZWQoZXZlbnQsIHNpZGUpIHtcclxuICAgIGxldCB2YWwgPSBuZXcgRGF0ZShldmVudC50YXJnZXQudmFsdWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgaWYgKHRoaXMuaXNEaXNhYmxlZCh2YWwpKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChzaWRlID09PSAnc3RhcnQnKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhcnREYXRlKHZhbCk7XHJcbiAgICB9IGVsc2UgaWYgKHNpZGUgPT09ICdlbmQnKSB7XHJcbiAgICAgIHRoaXMuc2V0RW5kRGF0ZSh2YWwpO1xyXG4gICAgICBpZiAodGhpcy5pc0JlZm9yZSh2YWwsIHRoaXMuc3RhcnREYXRlKSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhcnREYXRlKHZhbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuICB1cGRhdGVWaWV3KCkge1xyXG4gICAgaWYgKHRoaXMuZW5kRGF0ZSkge1xyXG5cclxuICAgICAgLy9pZiBib3RoIGRhdGVzIGFyZSB2aXNpYmxlIGFscmVhZHksIGRvIG5vdGhpbmdcclxuICAgICAgaWYgKCF0aGlzLnNpbmdsZURhdGVQaWNrZXIgJiYgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGggJiYgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoICYmXHJcbiAgICAgICAgKHRoaXMuZ2V0TW9udGhZZWFyKHRoaXMuc3RhcnREYXRlKSA9PSB0aGlzLmdldE1vbnRoWWVhcih0aGlzLmxlZnRDYWxlbmRhci5tb250aCkpIHx8ICh0aGlzLmdldE1vbnRoWWVhcih0aGlzLnN0YXJ0RGF0ZSkgPT0gdGhpcy5nZXRNb250aFllYXIodGhpcy5yaWdodENhbGVuZGFyLm1vbnRoKSlcclxuICAgICAgICAmJlxyXG4gICAgICAgICh0aGlzLmdldE1vbnRoWWVhcih0aGlzLmVuZERhdGUpID09IHRoaXMuZ2V0TW9udGhZZWFyKHRoaXMubGVmdENhbGVuZGFyLm1vbnRoKSB8fCB0aGlzLmdldE1vbnRoWWVhcih0aGlzLmVuZERhdGUpID09IHRoaXMuZ2V0TW9udGhZZWFyKHRoaXMucmlnaHRDYWxlbmRhci5tb250aCkpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGggPSBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICBpZiAoIXRoaXMubGlua2VkQ2FsZW5kYXJzICYmICh0aGlzLmVuZERhdGUuZ2V0TW9udGgoKSAhPSB0aGlzLnN0YXJ0RGF0ZS5nZXRNb250aCgpIHx8IHRoaXMuZW5kRGF0ZS5nZXRGdWxsWWVhcigpICE9IHRoaXMuc3RhcnREYXRlLmdldEZ1bGxZZWFyKCkpKSB7XHJcbiAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoID0gbmV3IERhdGUodGhpcy5lbmREYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoID0gbmV3IERhdGUodGhpcy5zdGFydERhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5zdGFydERhdGUuZ2V0TW9udGgoKSArIDEsIDEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0TW9udGhZZWFyKHRoaXMubGVmdENhbGVuZGFyLm1vbnRoKSAhPSB0aGlzLmdldE1vbnRoWWVhcih0aGlzLnN0YXJ0RGF0ZSkgJiYgdGhpcy5nZXRNb250aFllYXIodGhpcy5yaWdodENhbGVuZGFyLm1vbnRoKSAhPSB0aGlzLmdldE1vbnRoWWVhcih0aGlzLnN0YXJ0RGF0ZSkpIHtcclxuICAgICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aCA9IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoID0gbmV3IERhdGUodGhpcy5zdGFydERhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5zdGFydERhdGUuZ2V0TW9udGgoKSArIDEsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5tYXhEYXRlICYmIHRoaXMubGlua2VkQ2FsZW5kYXJzICYmICF0aGlzLnNpbmdsZURhdGVQaWNrZXIgJiYgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoID4gdGhpcy5tYXhEYXRlKSB7XHJcbiAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5tb250aCA9IG5ldyBEYXRlKHRoaXMubWF4RGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aCA9IG5ldyBEYXRlKHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLm1heERhdGUuZ2V0TW9udGgoKSAtIDEsIDEpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcignbGVmdCcpO1xyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigncmlnaHQnKTtcclxuICB9XHJcbiAgc2V0U3RhcnREYXRlKHN0YXJ0RGF0ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBzdGFydERhdGUgPT09ICdzdHJpbmcnKVxyXG4gICAgICB0aGlzLl9zdGFydERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xyXG5cclxuICAgIGlmICh0eXBlb2Ygc3RhcnREYXRlID09PSAnb2JqZWN0JylcclxuICAgICAgdGhpcy5fc3RhcnREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSk7XHJcblxyXG4gICAgdGhpcy5kaXNwbGF5U3RhcnREYXRlID0gdGhpcy5zdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHNldEVuZERhdGUoZW5kRGF0ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBlbmREYXRlID09PSAnc3RyaW5nJylcclxuICAgICAgdGhpcy5fZW5kRGF0ZSA9IG5ldyBEYXRlKGVuZERhdGUpO1xyXG5cclxuICAgIGlmICh0eXBlb2YgZW5kRGF0ZSA9PT0gJ29iamVjdCcpXHJcbiAgICAgIHRoaXMuX2VuZERhdGUgPSBuZXcgRGF0ZShlbmREYXRlLmdldFRpbWUoKSk7XHJcblxyXG5cclxuICAgIHRoaXMuZGlzcGxheUVuZERhdGUgPSB0aGlzLmVuZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICB0aGlzLnRtcEVuZERhdGUgPSBudWxsO1xyXG4gIH1cclxuICBhcHBseUNsaWNrKCkge1xyXG4gICAgdGhpcy5kYXRlU2VsZWN0ZWQuZW1pdCh0aGlzLnN0YXJ0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSArICcgLSAnICsgdGhpcy5lbmREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpKTtcclxuICB9XHJcbiAgY2FuY2VsQ2xpY2soKSB7XHJcbiAgICB0aGlzLmNsb3NlLmVtaXQoZmFsc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE5nWm9uZSwgT3V0cHV0LCBIb3N0TGlzdGVuZXIsIFJlbmRlcmVyMiwgVmlld0NoaWxkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDb21wb25lbnRGYWN0b3J5LCBDb21wb25lbnRSZWYsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IERhdGVQaWNrZXJEaXJlY3RpdmVDb21wb25lbnQgfSBmcm9tICcuL2RhdGUtcGlja2VyLWRpcmVjdGl2ZS5jb21wb25lbnQnO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgc2VsZWN0b3I6ICdbZGF0ZS1waWNrZXJdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlckRpcmVjdGl2ZSB7XHJcbiAgQElucHV0KCkgbWluRGF0ZT86IHN0cmluZztcclxuICBASW5wdXQoKSBtYXhEYXRlPzogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHNpbmdsZURhdGVQaWNrZXI/OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGxpbmtlZENhbGVuZGFycz86IGJvb2xlYW5cclxuICBASW5wdXQoKSBzdGFydERhdGU/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgbmdNb2RlbD86IHN0cmluZztcclxuICBASW5wdXQoKSBlbmREYXRlPzogc3RyaW5nO1xyXG4gIEBPdXRwdXQoKSBkYXRlc2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIG5nTW9kZWxDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIGNvbXBvbmVudFJlZiA9IG51bGw7XHJcbiAgcGlja2VyTG9hZGVkID0gZmFsc2U7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICBwcml2YXRlIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKSB7IH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignZm9jdXMnLCBbJyRldmVudCddKVxyXG4gIG9uRm9jdXMoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudmlld0NvbnRhaW5lci5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCwgJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XHJcbiAgICBsZXQgaGVpZ2h0ID0gdGhpcy52aWV3Q29udGFpbmVyLmVsZW1lbnQubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB0aGlzLnZpZXdDb250YWluZXIuY2xlYXIoKTtcclxuICAgIGxldCBjb21wb25lbnRGYWN0b3J5ID0gdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoRGF0ZVBpY2tlckRpcmVjdGl2ZUNvbXBvbmVudCk7XHJcbiAgICB0aGlzLmNvbXBvbmVudFJlZiA9IHRoaXMudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoY29tcG9uZW50RmFjdG9yeSk7XHJcbiAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5taW5EYXRlID0gdGhpcy5taW5EYXRlO1xyXG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UubWF4RGF0ZSA9IHRoaXMubWF4RGF0ZTtcclxuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNpbmdsZURhdGVQaWNrZXIgPSB0aGlzLnNpbmdsZURhdGVQaWNrZXI7XHJcbiAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZTtcclxuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmVuZERhdGUgPSB0aGlzLmVuZERhdGU7XHJcblxyXG4gICAgbGV0IGVsbSA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmwtZHJwaWNrZXInKTtcclxuICAgIGVsbS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3RvcDonICsgcGFyc2VJbnQoaGVpZ2h0ICsgMTApICsgJ3B4Jyk7XHJcbiAgICBsZXQgcmVjdCA9IGVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBsID0gcmVjdC5sZWZ0O1xyXG4gICAgbGV0IHcgPSByZWN0LndpZHRoO1xyXG4gICAgbGV0IGRvY0ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0ub2Zmc2V0SGVpZ2h0O1xyXG4gICAgbGV0IGRvY1cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0ub2Zmc2V0V2lkdGg7XHJcbiAgICBsZXQgaXNFbnRpcmVseVZpc2libGUgPSAobCArIHcgPD0gZG9jVyk7XHJcblxyXG4gICAgaWYgKCFpc0VudGlyZWx5VmlzaWJsZSkge1xyXG4gICAgICBlbG0uY2xhc3NMaXN0LmFkZCgnZWRnZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZWxtLmNsYXNzTGlzdC5yZW1vdmUoJ2VkZ2UnKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNsb3NlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuZGF0ZVNlbGVjdGVkLnN1YnNjcmliZSgodmFsKSA9PiB7XHJcbiAgICAgIHRoaXMuZGF0ZXNlbGVjdGVkLmVtaXQodmFsKTtcclxuICAgICAgdGhpcy5jb21wb25lbnRSZWYuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLnBpY2tlckxvYWRlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Y2xpY2snLCBbJyRldmVudC50YXJnZXQnXSlcclxuICBwdWJsaWMgb25DbGljayh0YXJnZXRFbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5jb21wb25lbnRSZWYpIHtcclxuICAgICAgY29uc3QgY2xpY2tlZERwID0gdGhpcy5jb21wb25lbnRSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudC5jb250YWlucyh0YXJnZXRFbGVtZW50KTtcclxuICAgICAgY29uc3QgY2xpY2tlZElucHV0ID0gdGhpcy52aWV3Q29udGFpbmVyLmVsZW1lbnQubmF0aXZlRWxlbWVudCA9PSB0YXJnZXRFbGVtZW50O1xyXG4gICAgICBjb25zdCBpbkRwID0gKHRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudCA/IHRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbGVuZGFyLXJvdycpIDogZmFsc2UpO1xyXG4gICAgICBpZiAoIWNsaWNrZWREcCAmJiAhY2xpY2tlZElucHV0ICYmICFpbkRwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgRGF0ZVBpY2tlckRpcmVjdGl2ZUNvbXBvbmVudCB9IGZyb20gJy4vZGF0ZS1waWNrZXItZGlyZWN0aXZlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERhdGVQaWNrZXJEaXJlY3RpdmUgfSBmcm9tICcuL2RhdGUtcGlja2VyLmRpcmVjdGl2ZSc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVcclxuICBdLFxyXG4gIGVudHJ5Q29tcG9uZW50czogW0RhdGVQaWNrZXJEaXJlY3RpdmVDb21wb25lbnRdLFxyXG4gIGRlY2xhcmF0aW9uczogW0RhdGVQaWNrZXJEaXJlY3RpdmVDb21wb25lbnQsIERhdGVQaWNrZXJEaXJlY3RpdmVdLFxyXG4gIGV4cG9ydHM6IFtEYXRlUGlja2VyRGlyZWN0aXZlQ29tcG9uZW50LCBEYXRlUGlja2VyRGlyZWN0aXZlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlck1vZHVsZSB7IH1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtJQU9FLGlCQUFpQjs7O1lBTGxCLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQjs7Ozs7Ozs7OztBQ0pEO0lBOEVFO3dCQXJFZ0IsSUFBSTt3QkFVSixJQUFJO2dDQVdrQixLQUFLOzs7Ozs7Ozs7OzsrQkFZekIsSUFBSTswQkF3QlQsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQzt1QkFDbEYsSUFBSTswQkFDRCxJQUFJO29CQUlWLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDOzRCQUd4QixPQUFPO3FCQUN0QixJQUFJLFlBQVksRUFBRTs0QkFDWCxJ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