!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("date-picker-directive",["exports","@angular/core","@angular/common"],e):e(t["date-picker-directive"]={},t.ng.core,t.ng.common)}(this,function(t,r,e){"use strict";var n=function(){function t(){}return t.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=r.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),l=function(){function t(){this._mindate=null,this._maxdate=null,this.singleDatePicker=!1,this.linkedCalendars=!0,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.tmpDate=null,this.tmpEndDate=null,this.days=["S","M","T","W","T","F","S"],this.focusedInput="start",this.close=new r.EventEmitter,this.dateSelected=new r.EventEmitter}return Object.defineProperty(t.prototype,"minDate",{get:function(){return this._mindate},set:function(t){t&&(this._mindate=new Date(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDate",{get:function(){return this._maxdate},set:function(t){t&&(this._maxdate=new Date(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startDate",{get:function(){return this._startDate},set:function(t){t&&(this._startDate=new Date(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endDate",{get:function(){return this._endDate},set:function(t){t&&(this._endDate=new Date(t))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.ranges=[{title:"Today",period:[new Date,new Date]},{title:"Yesterday",period:[this.getYesterday(),this.getYesterday()]},{title:"Last 7 Days",period:[this.getPast7Days(),new Date]},{title:"Last 30 Days",period:[this.getPast30Days(),new Date]},{title:"This Month",period:[this.getFirstDay(),new Date]},{title:"Last Month",period:[this.getFirstDayPrev(),this.getLastDayPrev()]}],this.startDate||(this._startDate=new Date),this.leftCalendar={month:new Date(this.startDate.getTime()),calendar:null},this.endDate||(this._endDate=new Date(this.startDate)),this.rightCalendar={month:this.getNextMonth(this.endDate),calendar:null},this.displayStartDate=this.startDate.toLocaleDateString(),this.displayEndDate=this.endDate.toLocaleDateString(),this.renderCalendar("left"),this.renderCalendar("right")},t.prototype.getYesterday=function(){var t=new Date;return t.setDate(t.getDate()-1),t},t.prototype.getPast7Days=function(){var t=new Date;return t.setDate(t.getDate()-6),t},t.prototype.getPast30Days=function(){var t=new Date;return t.setDate(t.getDate()-29),t},t.prototype.getFirstDay=function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},t.prototype.getFirstDayPrev=function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth()-1,1)},t.prototype.getLastDayPrev=function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),0)},t.prototype.daysInMonth=function(t,e){return new Date(e,t,0).getDate()},t.prototype.getLastMonth=function(t){var e=new Date(t.getTime()),n=new Date(e.getTime());return n.setMonth(e.getMonth()-1),n},t.prototype.getNextMonth=function(t){var e=new Date(t.getTime());return new Date(e.setMonth(e.getMonth()+1))},t.prototype.getMonthYear=function(t){return t.getFullYear()+"-"+t.getMonth()},t.prototype.isBefore=function(t,e){return t<e},t.prototype.isAfter=function(t,e){return e<t},t.prototype.renderCalendar=function(t){for(var e="left"==t?this.leftCalendar.month:this.rightCalendar.month,n=e.getMonth(),a=e.getFullYear(),r=(this.daysInMonth(n+1,a),new Date(a,n,1)),i=this.getLastMonth(r).getMonth(),o=this.getLastMonth(r).getFullYear(),s=this.daysInMonth(i+1,o),l=r.getDay(),c=[],d=0;d<6;d++)c[d]=[];var h=s-l+1;s<h&&(h-=7),0===l&&(h=s-6);for(var p=new Date(o,i,h),g=(d=0,0),u=0;d<42;d++,g++,p.setDate(p.getDate()+1))0<d&&g%7==0&&(g=0,u++),c[u][g]=new Date(p.getTime()),p.setHours(12),this.minDate&&c[u][g].toLocaleDateString()==this.minDate.toLocaleDateString()&&this.isBefore(c[u][g],this.minDate)&&"left"==t&&(c[u][g]=new Date(this.minDate.getTime())),this.maxDate&&c[u][g].toLocaleDateString()==this.maxDate.toLocaleDateString()&&this.isAfter(c[u][g],this.maxDate)&&"right"==t&&(c[u][g]=new Date(this.maxDate.getTime()));"left"==t?this.leftCalendar.calendar=c:this.rightCalendar.calendar=c},t.prototype.isToday=function(t){return!!t&&(new Date).toLocaleDateString()===t.toLocaleDateString()},t.prototype.isActiveDate=function(t){return t.toLocaleDateString()==this.startDate.toLocaleDateString()||!(!this.endDate||t.toLocaleDateString()!=this.endDate.toLocaleDateString())},t.prototype.isStartDate=function(t){return t.toLocaleDateString()==this.startDate.toLocaleDateString()},t.prototype.isEndDate=function(t){return!(!this.endDate||t.toLocaleDateString()!=this.endDate.toLocaleDateString())},t.prototype.isDisabled=function(t){return!(!this.minDate||!this.isBefore(t,this.minDate))||!(!this.maxDate||!this.isAfter(t,this.maxDate))},t.prototype.isInRange=function(t){return this.endDate?!(!this.isAfter(t,this.startDate)||!this.isBefore(t,this.endDate)):!(!this.isAfter(t,this.startDate)||!this.isBefore(t,this.tmpDate))},t.prototype.nextAvailable=function(){var t=this.singleDatePicker?this.leftCalendar:this.rightCalendar,e=new Date(t.month.getFullYear(),t.month.getMonth()+1,0);return!(this.maxDate&&!this.isAfter(this.maxDate,e))},t.prototype.prevAvailable=function(){var t=this.leftCalendar,e=new Date(t.month.getFullYear(),t.month.getMonth(),1);return!(this.minDate&&!this.isBefore(this.minDate,e))},t.prototype.notActiveMonth=function(t,e){var n="left"==e?this.leftCalendar.calendar:this.rightCalendar.calendar;return t.getMonth()!=n[1][1].getMonth()},t.prototype.getMonth=function(t){var e="left"==t?this.leftCalendar.calendar:this.rightCalendar.calendar;return this.monthNames[e[1][1].getMonth()]+" "+e[1][1].getFullYear()},t.prototype.clickPrev=function(){this.leftCalendar.month.setMonth(this.leftCalendar.month.getMonth()-1),this.renderCalendar("left"),this.rightCalendar.calendar&&(this.rightCalendar.month.setMonth(this.rightCalendar.month.getMonth()-1),this.renderCalendar("right"))},t.prototype.clickNext=function(){this.leftCalendar.month.setMonth(this.leftCalendar.month.getMonth()+1),this.renderCalendar("left"),this.rightCalendar.calendar&&(this.rightCalendar.month.setMonth(this.rightCalendar.month.getMonth()+1),this.renderCalendar("right"))},t.prototype.clickdate=function(t,e){if(this.isDisabled(t))return!1;this.endDate||this.isBefore(t,this.startDate)?(this._endDate=null,this.setStartDate(t),this.tmpEndDate?this.setEndDate(this.tmpEndDate):this.focusedInput="end"):(!this.endDate&&this.isBefore(t,this.startDate)?this.setEndDate(this.startDate):this.setEndDate(t),this.focusedInput="start"),this.singleDatePicker&&(this.setEndDate(this.startDate),this.focusedInput="start",this.dateSelected.emit(this.startDate.toLocaleDateString())),this.updateView()},t.prototype.rangeClick=function(t){this.setStartDate(t.period[0]),this.setEndDate(t.period[1]),this.updateView(),this.applyClick()},t.prototype.rangeHover=function(t){this.displayStartDate=t.period[0].toLocaleDateString(),this.displayEndDate=t.period[1].toLocaleDateString()},t.prototype.hoverExit=function(){this.displayStartDate=this.startDate.toLocaleDateString(),this.displayEndDate=this.endDate?this.endDate.toLocaleDateString():this.displayStartDate},t.prototype.hoverdate=function(t){if(this.isDisabled(t))return!1;this.tmpDate=new Date(t.getTime()),"start"===this.focusedInput?this.displayStartDate=this.tmpDate.toLocaleDateString():this.displayEndDate=this.tmpDate.toLocaleDateString()},t.prototype.inputFocus=function(t){this.focusedInput=t,this.endDate&&(this.tmpEndDate=new Date(this.endDate.getTime()),"start"==t||"end"==t&&(this._endDate=null))},t.prototype.inputBlur=function(t){},t.prototype.inputChanged=function(t,e){var n=new Date(t.target.value).toLocaleDateString();if(this.isDisabled(n))return!1;"start"===e?this.setStartDate(n):"end"===e&&(this.setEndDate(n),this.isBefore(n,this.startDate)&&this.setStartDate(n)),this.updateView()},t.prototype.updateView=function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&this.getMonthYear(this.startDate)==this.getMonthYear(this.leftCalendar.month)||this.getMonthYear(this.startDate)==this.getMonthYear(this.rightCalendar.month)&&(this.getMonthYear(this.endDate)==this.getMonthYear(this.leftCalendar.month)||this.getMonthYear(this.endDate)==this.getMonthYear(this.rightCalendar.month)))return;this.leftCalendar.month=new Date(this.startDate.getTime()),this.linkedCalendars||this.endDate.getMonth()==this.startDate.getMonth()&&this.endDate.getFullYear()==this.startDate.getFullYear()?this.rightCalendar.month=new Date(this.startDate.getFullYear(),this.startDate.getMonth()+1,1):this.rightCalendar.month=new Date(this.endDate.getTime())}else this.getMonthYear(this.leftCalendar.month)!=this.getMonthYear(this.startDate)&&this.getMonthYear(this.rightCalendar.month)!=this.getMonthYear(this.startDate)&&(this.leftCalendar.month=new Date(this.startDate.getTime()),this.rightCalendar.month=new Date(this.startDate.getFullYear(),this.startDate.getMonth()+1,1));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=new Date(this.maxDate.getTime()),this.leftCalendar.month=new Date(this.maxDate.getFullYear(),this.maxDate.getMonth()-1,1)),this.renderCalendar("left"),this.renderCalendar("right")},t.prototype.setStartDate=function(t){"string"==typeof t&&(this._startDate=new Date(t)),"object"==typeof t&&(this._startDate=new Date(t.getTime())),this.displayStartDate=this.startDate.toLocaleDateString()},t.prototype.setEndDate=function(t){"string"==typeof t&&(this._endDate=new Date(t)),"object"==typeof t&&(this._endDate=new Date(t.getTime())),this.displayEndDate=this.endDate.toLocaleDateString(),this.tmpEndDate=null},t.prototype.applyClick=function(){this.dateSelected.emit(this.startDate.toLocaleDateString()+" - "+this.endDate.toLocaleDateString())},t.prototype.cancelClick=function(){this.close.emit(!1)},t.decorators=[{type:r.Component,args:[{selector:"date-picker-directive",template:'<div class="rl-drpicker">\n  <div id="range-container" class="column" *ngIf="!singleDatePicker">\n    <div *ngFor="let range of ranges" class="range" (mouseenter)="rangeHover(range)" (mouseleave)="hoverExit()" (click)="rangeClick(range)">{{range.title}}</div>\n    <div class="buttons">\n      <button class="apply" (click)="applyClick()">Apply</button>\n      <button class="cancel" (click)="cancelClick()">Cancel</button>\n    </div>\n  </div>\n  <div id="calendar-container" class="column left">\n    <div class="calendar-input">\n      <input type="text" placeholder="Start Date" [value]="displayStartDate" [class.focused]="focusedInput==\'start\'" (change)="inputChanged($event, \'start\')"\n        (focus)="inputFocus(\'start\')" (blur)="inputBlur(\'start\')" />\n    </div>\n    <div class="calendar-table">\n      <div class="calendar-period">\n        <div class="nav-button prev" (click)="clickPrev()" *ngIf="prevAvailable()">\n          <i class="calendar-nav"></i>\n        </div>\n        {{getMonth(\'left\')}}\n        <div class="nav-button next" (click)="clickNext()" *ngIf="nextAvailable() && singleDatePicker">\n          <i class="calendar-nav"></i>\n        </div>\n      </div>\n      <div class="days-header">\n        <div class="day" *ngFor="let day of days">{{day}}</div>\n      </div>\n      <div class="calendar-row" *ngFor="let row of leftCalendar.calendar">\n        <div *ngFor="let col of row" [class.today]="isToday(col)" [class.off]="notActiveMonth(col, \'left\')" [class.active]="isActiveDate(col)"\n          [class.in-range]="isInRange(col)" [class.disabled]="isDisabled(col)" [ngClass]="{\'start-date\':isStartDate(col), \'end-date\':isEndDate(col)}"\n          (mouseenter)="hoverdate(col)" (mouseleave)="hoverExit()" (click)="clickdate(col, \'left\')">{{col.getDate()}}</div>\n      </div>\n    </div>\n  </div>\n  <div id="calendar-container" class="column right" *ngIf="!singleDatePicker">\n    <div class="calendar-input">\n      <input type="text" placeholder="End Date" [value]="displayEndDate" [class.focused]="focusedInput==\'end\'" (change)="inputChanged($event, \'end\')"\n        (focus)="inputFocus(\'end\')" (blur)="inputBlur(\'start\')" />\n    </div>\n    <div class="calendar-table">\n      <div class="calendar-period">\n        <div class="nav-button next" (click)="clickNext()" *ngIf="nextAvailable()">\n          <i class="calendar-nav"></i>\n        </div>\n        {{getMonth(\'right\')}}</div>\n      <div class="days-header">\n        <div class="day" *ngFor="let day of days">{{day}}</div>\n      </div>\n      <div class="calendar-row" *ngFor="let row of rightCalendar.calendar">\n        <div *ngFor="let col of row" [class.today]="isToday(col)" [class.off]="notActiveMonth(col, \'right\')" [class.active]="isActiveDate(col)"\n          (mouseleave)="hoverExit()" [class.in-range]="isInRange(col)" [class.disabled]="isDisabled(col)" [ngClass]="{\'start-date\':isStartDate(col), \'end-date\':isEndDate(col)}"\n          (mouseenter)="hoverdate(col)" (click)="clickdate(col, \'right\')">{{col.getDate()}}</div>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[".rl-drpicker{z-index:995;position:absolute;top:5px;left:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;display:flex;border:1px solid #eee;background-color:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175);width:auto;padding:10px;color:#333}.rl-drpicker.edge{right:0 !important;left: auto;}.rl-drpicker>.column{/*display:inline-block;vertical-align:top*/}.rl-drpicker>#range-container{width:140px;margin-right:10px;}.rl-drpicker>#range-container>.range{font-size:11pt;background-color:#f5f5f5;border:1px solid #f5f5f5;color:#08c;padding:5px 12px;margin-bottom:10px;cursor:pointer}.rl-drpicker>#range-container>.range:hover{background-color:#08c;border:1px solid #08c;color:#fff}.rl-drpicker>#calendar-container{margin-right:10px; width:230px;}.rl-drpicker>#calendar-container .calendar-input{padding:0 15px;margin-bottom:10px}.rl-drpicker>#calendar-container .calendar-input>input{width:100%;font-size:10pt;padding:5px 0 5px 5px;border:1px solid #ccc}.rl-drpicker>#calendar-container .calendar-input input.focused{border:1px solid #08c}.rl-drpicker>#calendar-container .calendar-period{text-align:center;font-weight:800;font-size:10pt;margin:7px 10px 3px 15px;line-height:24px;height:24px}.rl-drpicker>#calendar-container .calendar-period .nav-button{height:100%;width:32px;vertical-align:top;text-align:center;cursor:pointer}.rl-drpicker>#calendar-container .calendar-period .nav-button>.calendar-nav{border:solid #333;border-width:0 3px 3px 0;padding:5px;display:inline-block}.rl-drpicker>#calendar-container .calendar-period .nav-button.prev{float:left}.rl-drpicker>#calendar-container .calendar-period .nav-button.prev>.calendar-nav{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.rl-drpicker>#calendar-container .calendar-period .nav-button.next{float:right}.rl-drpicker>#calendar-container .calendar-period .nav-button.next>.calendar-nav{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.rl-drpicker>#calendar-container .calendar-period .nav-button:hover .calendar-nav{border:solid #08c;border-width:0 3px 3px 0}.rl-drpicker>#calendar-container .days-header>div{display:inline-block;font-weight:800;font-size:10pt;white-space:nowrap;text-align:center;width:32px;height:32px;line-height:32px}.rl-drpicker>#calendar-container .calendar-row>div{cursor:pointer;display:inline-block;font-weight:500;font-size:10pt;white-space:nowrap;text-align:center;width:32px;height:32px;line-height:32px}.rl-drpicker>#calendar-container .calendar-row>div:hover{background-color:#eee;color:#333}.rl-drpicker>#calendar-container .calendar-row>div.active:not(.off){background-color:#08c!important;color:#fff!important}.rl-drpicker>#calendar-container .calendar-row>div.in-range:not(.off){background-color:#ebf4f8;color:#333}.rl-drpicker>#calendar-container .calendar-row .today:not(.off){background:#b71c1c;color:#fff}.rl-drpicker>#calendar-container .calendar-row .off{color:#999}.rl-drpicker>#calendar-container .calendar-row .disabled{color:#999;text-decoration:line-through}.rl-drpicker>#calendar-container:last-of-type{margin-right:0}.rl-drpicker .buttons{display: flex;justify-content:space-between;}.rl-drpicker .buttons>button{padding:5px 10px;font-size:11pt;cursor:pointer}.rl-drpicker .buttons button.apply{background:#08c;color:#fff;border:1px solid #08c}.rl-drpicker .buttons button.apply:hover{background:#1565c0}.rl-drpicker .buttons button.cancel{background:#eee;border:1px solid #ddd}.rl-drpicker .buttons button.cancel:hover{background:#ccc}.rl-drpicker:before{position:absolute;display:inline-block;top:-9px;border-right:7px solid transparent;border-left:7px solid transparent;border-bottom:9px solid #eee;content:''}.rl-drpicker.edge:before{right:10px;}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={minDate:[{type:r.Input}],maxDate:[{type:r.Input}],singleDatePicker:[{type:r.Input}],startDate:[{type:r.Input}],endDate:[{type:r.Input}]},t}(),a=function(){function t(t,e,n,a){this.ngZone=t,this.renderer=e,this.viewContainer=n,this.componentFactoryResolver=a,this.dateselected=new r.EventEmitter,this.ngModelChanged=new r.EventEmitter,this.componentRef=null,this.pickerLoaded=!1}return t.prototype.onFocus=function(t){var e=this;this.renderer.setStyle(this.viewContainer.element.nativeElement.parentElement,"position","relative");var n=this.viewContainer.element.nativeElement.offsetHeight;this.viewContainer.clear();var a=this.componentFactoryResolver.resolveComponentFactory(l);this.componentRef=this.viewContainer.createComponent(a),this.componentRef.instance.minDate=this.minDate,this.componentRef.instance.maxDate=this.maxDate,this.componentRef.instance.singleDatePicker=this.singleDatePicker,this.componentRef.instance.startDate=this.startDate,this.componentRef.instance.endDate=this.endDate;var r=document.querySelector(".rl-drpicker");r.setAttribute("style","top:"+parseInt(n+10)+"px");var i=r.getBoundingClientRect(),o=i.left,s=i.width;document.getElementsByTagName("body")[0].offsetHeight;o+s<=document.getElementsByTagName("body")[0].offsetWidth?r.classList.remove("edge"):r.classList.add("edge"),this.componentRef.instance.close.subscribe(function(){e.componentRef.destroy()}),this.componentRef.instance.dateSelected.subscribe(function(t){e.dateselected.emit(t),e.componentRef.destroy(),e.pickerLoaded=!1})},t.prototype.onClick=function(t){if(this.componentRef){var e=this.componentRef.location.nativeElement.contains(t),n=this.viewContainer.element.nativeElement==t,a=!!t.parentElement&&t.parentElement.classList.contains("calendar-row");e||n||a||this.componentRef&&this.componentRef.destroy()}},t.decorators=[{type:r.Directive,args:[{selector:"[date-picker]"}]}],t.ctorParameters=function(){return[{type:r.NgZone},{type:r.Renderer2},{type:r.ViewContainerRef},{type:r.ComponentFactoryResolver}]},t.propDecorators={minDate:[{type:r.Input}],maxDate:[{type:r.Input}],singleDatePicker:[{type:r.Input}],linkedCalendars:[{type:r.Input}],startDate:[{type:r.Input}],ngModel:[{type:r.Input}],endDate:[{type:r.Input}],dateselected:[{type:r.Output}],ngModelChanged:[{type:r.Output}],onFocus:[{type:r.HostListener,args:["focus",["$event"]]}],onClick:[{type:r.HostListener,args:["document:click",["$event.target"]]}]},t}(),i=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule],entryComponents:[l],declarations:[l,a],exports:[l,a]}]}],t}();t.DatePickerDirectiveService=n,t.DatePickerDirectiveComponent=l,t.DatePickerDirective=a,t.DatePickerModule=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=date-picker-directive.umd.min.js.map